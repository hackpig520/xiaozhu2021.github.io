<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<script>
/*    function GetQueryString(name)
{
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)return  unescape(r[2]); return;
}
var ip=GetQueryString("ip");
    if (ip !=null)
    {
window.location.replace("https://api.uixsj.cn/ip/get?ip=" + ip) //可能随时掉线
//备用（126api）：window.location.replace("http://ip.ws.126.net/ipquery?ip=" + ip)
//备用2（搜狐）：window.location.replace("http://pv.sohu.com/cityjson")
//备用3(慢，国外的)：window.location.replace("http://ip-api.com/json/")
    }
*/
    function get_ip(cb) {
        var script = document.createElement("script"),
            s = document.getElementsByTagName("script")[0];
        script.src = "http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=jsonp";
        s.parentNode.insertBefore(script, s);
        var it = setInterval(function() {
            if (!!remote_ip_info) {
                cb(remote_ip_info);
                remote_ip_info = null;
                clearInterval(it);
                it = null;
            }
        }, 100);
    }
    get_ip(function(info) {
        alert('你的ip所在地为:' + info.country + info.province + info.city);
    });
</script>
</head>
<body>
<pre id="error"></pre>
<!-- 
返回格式:
{
	"ip": "223.73.193.191",
	"beginip": "223.73.193.0",
	"endip": "223.73.193.255",
	"pos": "广东省中山市",
	"isp": "移动"
}
-->
</body>
</html>
